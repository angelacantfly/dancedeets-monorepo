cron:
# These rely on 701004
- description: reload future facebook event data
  url: /tasks/reload_events?user_id=701004&allow_cache=0&time_period=FUTURE&load_attending=0&disable_updates=
  schedule: every 2 hours
- description: reload future facebook attending event data
  url: /tasks/reload_events?user_id=701004&allow_cache=0&time_period=FUTURE&load_attending=1&disable_updates=
  schedule: every 5 hours
#
# These load potential events from all the various sources out there that we want and query/
# If it's the first time we see an event, we'll grab
- description: load potential events from special users and sources
  url: /tasks/scrape_sources_and_process_events?user_id=dummy&allow_cache=0&min_potential_events=0
  # TODO: Speed this up, once we speed up the reduce phase
  schedule: every monday 00:00
# TODO: Speed this up, and enable this, once we speed up the reduce phase
#- description: load potential events from special users and sources
#  url: /tasks/scrape_sources_and_process_events?user_id=dummy&allow_cache=0&min_potential_events=1
#  schedule: every 21 hours

# These also load potential events, but from the /events of our logged-in users
- description: load potential events from our users
  url: /tasks/load_all_potential_events?user_id=dummy&allow_cache=0
  schedule: every 8 hours
#
# These run through all our collected potential events and reload them, checking for what should be included.
# They will periodically refresh the event data to check for the latest values.
# Many times events get discovered in one of the earlier stages, but *too* early, when keywords/attendees don't trigger yet.
# These mapreduces are the "cleanups" that run through and reload them and guarantee they get rechecked.
- description: auto-add events
  url: /tools/auto_add_potential_events?user_id=dummy&past_event=0&expiry_days=2&dancey_only=1
  schedule: every 12 hours
- description: auto-add events
  url: /tools/auto_add_potential_events?user_id=dummy&past_event=0&expiry_days=2
  schedule: every 30 hours
#
#
- description: reload user data
  url: /tasks/reload_all_users?user_id=dummy&allow_cache=0
  schedule: every 25 hours
- description: email users about upcoming events
  url: /tasks/email_all_users?user_id=dummy
  schedule: every wednesday 15:00
  timezone: America/Los_Angeles
- description: post to social networks
  url: /tasks/social_publisher
  schedule: every 1 minutes
- description: search fb for more events
  url: /tools/search_fb_for_events?user_id=random
  schedule: every 9 hours
# This seems to be too spammy, and has a negative effect on users :(
# So let's disable it for now, until we can find a better threshold/metric for whether to notify users
#- description: notify about newly-added events
#  url: /tasks/promote_new_events
#  schedule: every 1 hours
- description: scrape all classes and index them
  url: /tasks/crawl_and_index_classes
  schedule: every 6 hours
- description: calculate periodic statistics and rankings
  url: /tasks/compute_rankings
  schedule: every 48 hours
#- description: reload past facebook event data
#  url: /tasks/reload_events?user_id=dummy&allow_cache=0&time_period=FUTURE
#  schedule: every monday 2:00
- description: compute popular organizers/dancers
  url: /tools/popular_people?user_id=701004
  # twice a month
  schedule: 1,15 of month 09:00
